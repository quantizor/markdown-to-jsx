if (--all) soft reset back to the beginning of the branch and regroup the commits topically according to the final code; no description of changes or optimization steps are required for new files

else inspect uncommitted changes, group them thematically (e.g. all changes related to adding a new integration), and commit them

in both cases, avoid an excessive number of commits, batch the changes coarsely
